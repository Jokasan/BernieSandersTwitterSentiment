<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="pandoc" />

        <meta name="author" content="Nils Indreiten" />
    
        <meta name="date" content="2021-08-18" />
    
    <title>Sentiment Analysis of Bernie Sander Tweets</title>

        <script src="site_libs/header-attrs-2.9/header-attrs.js"></script>
        <script src="site_libs/jquery-3.5.1/jquery.min.js"></script>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link href="site_libs/bootstrap-3.3.7/css/bootstrap.min.css" rel="stylesheet" />
        <script src="site_libs/bootstrap-3.3.7/js/bootstrap.min.js"></script>
        <script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
        <script src="site_libs/navigation-1.1/tabsets.js"></script>
        <link href="site_libs/magnific-popup-1.1.0/magnific-popup.css" rel="stylesheet" />
        <script src="site_libs/magnific-popup-1.1.0/jquery.magnific-popup.min.js"></script>
        <link href="site_libs/readthedown-0.1/readthedown.css" rel="stylesheet" />
        <link href="site_libs/readthedown-0.1/readthedown_fonts_embed.css" rel="stylesheet" />
        <script src="site_libs/readthedown-0.1/readthedown.js"></script>
        <script src="site_libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
        <script src="site_libs/plotly-binding-4.9.4.1/plotly.js"></script>
        <script src="site_libs/typedarray-0.1/typedarray.min.js"></script>
        <link href="site_libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
        <script src="site_libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
        <link href="site_libs/plotly-htmlwidgets-css-1.57.1/plotly-htmlwidgets.css" rel="stylesheet" />
        <script src="site_libs/plotly-main-1.57.1/plotly-latest.min.js"></script>
    
    
        <style type="text/css">code{white-space: pre;}</style>
    <style type="text/css">
      pre > code.sourceCode { white-space: pre; position: relative; }
      pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
      pre > code.sourceCode > span:empty { height: 1.2em; }
      .sourceCode { overflow: visible; }
      code.sourceCode > span { color: inherit; text-decoration: inherit; }
      div.sourceCode { margin: 1em 0; }
      pre.sourceCode { margin: 0; }
      @media screen {
      div.sourceCode { overflow: auto; }
      }
      @media print {
      pre > code.sourceCode { white-space: pre-wrap; }
      pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
      }
      pre.numberSource code
        { counter-reset: source-line 0; }
      pre.numberSource code > span
        { position: relative; left: -4em; counter-increment: source-line; }
      pre.numberSource code > span > a:first-child::before
        { content: counter(source-line);
          position: relative; left: -1em; text-align: right; vertical-align: baseline;
          border: none; display: inline-block;
          -webkit-touch-callout: none; -webkit-user-select: none;
          -khtml-user-select: none; -moz-user-select: none;
          -ms-user-select: none; user-select: none;
          padding: 0 4px; width: 4em;
          color: #aaaaaa;
        }
      pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
      div.sourceCode
        {  background-color: #f8f8f8; }
      @media screen {
      pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
      }
      code span.al { color: #ef2929; } /* Alert */
      code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
      code span.at { color: #c4a000; } /* Attribute */
      code span.bn { color: #0000cf; } /* BaseN */
      code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
      code span.ch { color: #4e9a06; } /* Char */
      code span.cn { color: #000000; } /* Constant */
      code span.co { color: #8f5902; font-style: italic; } /* Comment */
      code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
      code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
      code span.dt { color: #204a87; } /* DataType */
      code span.dv { color: #0000cf; } /* DecVal */
      code span.er { color: #a40000; font-weight: bold; } /* Error */
      code span.ex { } /* Extension */
      code span.fl { color: #0000cf; } /* Float */
      code span.fu { color: #000000; } /* Function */
      code span.im { } /* Import */
      code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
      code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
      code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
      code span.ot { color: #8f5902; } /* Other */
      code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
      code span.sc { color: #000000; } /* SpecialChar */
      code span.ss { color: #4e9a06; } /* SpecialString */
      code span.st { color: #4e9a06; } /* String */
      code span.va { color: #000000; } /* Variable */
      code span.vs { color: #4e9a06; } /* VerbatimString */
      code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
    </style>
    
    
    <!-- tabsets -->
    <script>
      $(document).ready(function () {
	  window.buildTabsets("toc");
      });
      $(document).ready(function () {
	  $('.tabset-dropdown > .nav-tabs > li').click(function () {
	      $(this).parent().toggleClass('nav-tabs-open')
	  });
      });
    </script>

    <!-- code folding -->
    
    <!-- code download -->
    
    <!-- tabsets dropdown -->

    <style type="text/css">
      .tabset-dropdown > .nav-tabs {
	  display: inline-table;
	  max-height: 500px;
	  min-height: 44px;
	  overflow-y: auto;
	  background: white;
	  border: 1px solid #ddd;
	  border-radius: 4px;
      }
      
      .tabset-dropdown > .nav-tabs > li.active:before {
	  content: "";
	  font-family: 'Glyphicons Halflings';
	  display: inline-block;
	  padding: 10px;
	  border-right: 1px solid #ddd;
      }
      
      .tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
	  content: "&#xe258;";
	  border: none;
      }
      
      .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
	  content: "";
	  font-family: 'Glyphicons Halflings';
	  display: inline-block;
	  padding: 10px;
	  border-right: 1px solid #ddd;
      }
      
      .tabset-dropdown > .nav-tabs > li.active {
	  display: block;
      }

      .tabset-dropdown > .nav-tabs > li.active a {
  	  padding: 0 15px !important;
      }

      .tabset-dropdown > .nav-tabs > li > a,
      .tabset-dropdown > .nav-tabs > li > a:focus,
      .tabset-dropdown > .nav-tabs > li > a:hover {
	  border: none;
	  display: inline-block;
	  border-radius: 4px;
	  background-color: transparent;
      }
      
      .tabset-dropdown > .nav-tabs.nav-tabs-open > li {
	  display: block;
	  float: none;
      }
      
      .tabset-dropdown > .nav-tabs > li {
	  display: none;
	  margin-left: 0 !important;
      }
    </style>
    
</head>

<body class="preload">

   	
         <!-- readthedown start -->   
   <div id="content" data-toggle="wy-nav-shift">
     <nav id="nav-top" role="navigation" aria-label="top navigation">
       <a role="button" href="#" data-toggle="wy-nav-top"><span class="glyphicon glyphicon-menu-hamburger"></span></a>
     </nav>
         
   
        
      <h1 class="title">Sentiment Analysis of Bernie Sander Tweets</h1>
      
         <!-- readthedown authors -->
   <div id="sidebar">
    <h2><a href="#content">Sentiment Analysis of Bernie Sander Tweets</a></h2>
    <div id="toc">
      <ul>
      <li><a href="#project-goal">Project Goal</a>
      <ul>
      <li><a href="#twitter-api">Twitter API</a></li>
      </ul></li>
      <li><a href="#data-pre-processing">Data Pre-processing</a>
      <ul>
      <li><a href="#non-graphical-characters">Non-graphical characters:</a></li>
      <li><a href="#removing-urls">Removing URLs</a></li>
      <li><a href="#removing-non-english-words">Removing Non-English words</a></li>
      <li><a href="#text-stemming">Text stemming</a></li>
      <li><a href="#term-document-matrix">Term Document Matrix</a></li>
      </ul></li>
      <li><a href="#associations">Associations</a></li>
      <li><a href="#topic-modelling">Topic Modelling</a></li>
      <li><a href="#sentiment-analysis">Sentiment Analysis</a>
      <ul>
      <li><a href="#emotion-lexicon">Emotion Lexicon</a></li>
      </ul></li>
      <li><a href="#session-info">Session Info</a></li>
      </ul>
    </div>
    <div id="postamble" data-toggle="wy-nav-shift" class="status">
                  <p class="author"><span class="glyphicon glyphicon-user"></span> Nils Indreiten</p>
                        <p class="date"><span class="glyphicon glyphicon-calendar"></span> 2021-08-18</p>
          </div>
   </div>
     

   
      
   
<!-- Don't indent these lines or it will mess pre blocks indentation --> 
<div id="main">
<div id="project-goal" class="section level1">
<h1>Project Goal</h1>
<p>The goal of this project is to perform basic text processing on tweets. In order to obtain this data the <a href="https://developer.twitter.com/en">Twitter API</a> was used. This allowed for the Bernie Sander tweets to be retrieved from the <a href="https://twitter.com/BernieSanders">BernieSanders</a> Twitter account.</p>
<div id="twitter-api" class="section level2">
<h2>Twitter API</h2>
<p>Once you have a Twitter developer account, you can create a Twitter app to generate Twitter API, Access Token and Secret Keys etc. In order to retrieve the tweets you need the following:</p>
<ul>
<li><p>Consumer Key</p></li>
<li><p>Consumer Secret</p></li>
<li><p>Access Token</p></li>
<li><p>Access Token Secret</p></li>
</ul>
<p>All of which can be accessed once you have created an app in the Twitter Developer portal. Once you have them, you can assign them to R objects as below, and authorize them using the setup_twitter_oath() :</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(twitteR)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ROAuth)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>consumer_key <span class="ot">&lt;-</span><span class="st">&#39;your consumer key&#39;</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>consumer_secret <span class="ot">&lt;-</span> <span class="st">&#39;your consumer secret&#39;</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>access_token <span class="ot">&lt;-</span> <span class="st">&#39;your access token&#39;</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>access_secret <span class="ot">&lt;-</span> <span class="st">&#39;your access secret&#39;</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">setup_twitter_oauth</span>(consumer_key, consumer_secret, access_token,</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>                    access_secret)</span></code></pre></div>
<p>The twitteR package has certain parameters that enable us to retrieve data from a specific user. In order to do so we have to specify the Twitter ID and the number of tweets, in this case we specify ‘BernieSanders’ and 583 tweets, from 2020-10-19 to 2021-08-17 (Twitter policy changes may affect the number of twitters you can pull):</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>twitter_user <span class="ot">&lt;-</span> <span class="st">&#39;BernieSanders&#39;</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>twitter_max <span class="ot">&lt;-</span> <span class="dv">583</span></span></code></pre></div>
<p>Next we can use the userTimeline() function to download the timeline (tweets) from the specified twitter_user. The function allows us to determine whether we also want to retrieve retweets and replied tweets, by specifying the relevant parameters. Consult the help documentation of the twitteR package for more details.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>tweets <span class="ot">&lt;-</span> <span class="fu">userTimeline</span>(twitter_user, <span class="at">n =</span> twitter_max, <span class="at">includeRts=</span><span class="cn">FALSE</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the amount of tweets pulled:</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(tweets)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert tweets to a data frame:</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>tweets.df <span class="ot">&lt;-</span> <span class="fu">twListToDF</span>(tweets)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co"># save the downloaded tweets into a csv for future use</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>file_name <span class="ot">=</span> <span class="st">&quot;Bernie_tweets.csv&quot;</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(tweets.df, <span class="at">file =</span> file_name)</span></code></pre></div>
<p>Once you have retrieved the tweets to your local environment or saved them as a csv file, you are ready to start exploring and pre-processing the data.</p>
</div>
</div>
<div id="data-pre-processing" class="section level1">
<h1>Data Pre-processing</h1>
<p>Load the Bernie Sanders tweets you previously saved:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>tweets.df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&#39;Bernie_tweets.csv&#39;</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p>Lets take a quick look at some of the tweets, for instance, say we are interested int he 150th tweet.:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tweet number 150</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>display_n <span class="ot">&lt;-</span> <span class="dv">150</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>tweets.df[display_n, <span class="fu">c</span>(<span class="st">&quot;text&quot;</span>)]</span></code></pre></div>
<blockquote>
<p>“The way to rebuild the crumbling middle class in this country is by growing the trade union movement.”</p>
</blockquote>
<p>Next in order to work with the text data properly we have to create a Corpus, which we can do using the Corpus() function from the tm package, it allows us to specify the source to be character vectors, we assign this to a new object, myCorpus:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>myCorpus_raw <span class="ot">&lt;-</span> <span class="fu">Corpus</span>(<span class="fu">VectorSource</span>(tweets.df<span class="sc">$</span>text))</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>myCorpus <span class="ot">&lt;-</span> myCorpus_raw </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>myCorpus</span></code></pre></div>
<pre><code>## &lt;&lt;SimpleCorpus&gt;&gt;
## Metadata:  corpus specific: 1, document level (indexed): 0
## Content:  documents: 583</code></pre>
<p>Using the lapply function we can index the corpus object, returning the first three tweets:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(myCorpus[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>], as.character)</span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;With our budget reconciliation legislation, we will make the largest investment in America&#39;s working families in de… https://t.co/7Y2PyELysJ&quot;
## 
## [[2]]
## [1] &quot;A government which responds to the needs of its people and not just the interests of corporations is what we must d… https://t.co/qS1ObEpsM4&quot;
## 
## [[3]]
## [1] &quot;Direct payments as a result of the expanded Child Tax Credit are now in month two. In that time:\n- child poverty ha… https://t.co/1Js1tsu6bx&quot;</code></pre>
<p>Now, we would like to remove non-graphical characters, remove non-English words, and remove URLs.</p>
<div id="non-graphical-characters" class="section level2">
<h2>Non-graphical characters:</h2>
<p>To replace non-graphical characters we will define an operation that replaces non-graphical characters with a space, we will name it toSpace, using the gsub function, and the content_transformer() function as a wrapper function:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>toSpace <span class="ot">&lt;-</span> <span class="fu">content_transformer</span>(<span class="cf">function</span>(x, pattern) {<span class="fu">return</span> (<span class="fu">gsub</span>(pattern,<span class="st">&quot; &quot;</span>,x))})</span></code></pre></div>
<p>In order to apply this to all non visible characters we will use ‘[^[:graph:]]’, which is a regular expression for all non-visible characters(<a href="http://www.regular-expressions.info/posixbrackets.html">Follow this link for more information on regular expressions.</a>):</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>myCorpus<span class="ot">&lt;-</span> <span class="fu">tm_map</span>(myCorpus,toSpace,<span class="st">&quot;[^[:graph:]]&quot;</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert to lower case</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>myCorpus <span class="ot">&lt;-</span> <span class="fu">tm_map</span>(myCorpus, <span class="fu">content_transformer</span>(tolower))</span></code></pre></div>
</div>
<div id="removing-urls" class="section level2">
<h2>Removing URLs</h2>
<p>Once again to remove the URLs we use regular ‘[:space:]’, which is another Regular expression for whitespace. What we are trying to do here is to match ‘[^[:space:]]’ (non-space) zero or multiple times, as a way to identify a URL. We will refer to this operation as removeURL and apply it to our Corpus object using the tm_map function:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>removeURL <span class="ot">&lt;-</span> <span class="cf">function</span>(x) <span class="fu">gsub</span>(<span class="st">&quot;http[^[:space:]]*&quot;</span>, <span class="st">&quot;&quot;</span>, x)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>myCorpus <span class="ot">&lt;-</span> <span class="fu">tm_map</span>(myCorpus, <span class="fu">content_transformer</span>(removeURL))</span></code></pre></div>
</div>
<div id="removing-non-english-words" class="section level2">
<h2>Removing Non-English words</h2>
<p>To remove everything except English words or space, we take advantage of the ‘[^[:alpha:][:space:]]*’ regular expression, assigning this operation to removeNumPunct then apply it to our Corpus as done in the previous step:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>removeNumPunct <span class="ot">&lt;-</span> <span class="cf">function</span>(x) <span class="fu">gsub</span>(<span class="st">&quot;[^[:alpha:][:space:]]*&quot;</span>, <span class="st">&quot;&quot;</span>, x) </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>myCorpus <span class="ot">&lt;-</span> <span class="fu">tm_map</span>(myCorpus, <span class="fu">content_transformer</span>(removeNumPunct))</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co"># remove stopwords</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>myCorpus <span class="ot">&lt;-</span> <span class="fu">tm_map</span>(myCorpus, removeWords, <span class="fu">stopwords</span>()) </span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="co"># remove extra whitespace</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>myCorpus <span class="ot">&lt;-</span> <span class="fu">tm_map</span>(myCorpus, stripWhitespace)</span></code></pre></div>
</div>
<div id="text-stemming" class="section level2">
<h2>Text stemming</h2>
<p>Text stemming basically reduces to their root form, the SnowballC package allows us to do so:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;SnowballC&quot;</span>)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>myCorpus <span class="ot">&lt;-</span> <span class="fu">tm_map</span>(myCorpus, stemDocument)</span></code></pre></div>
</div>
<div id="term-document-matrix" class="section level2">
<h2>Term Document Matrix</h2>
<p>Our final data preparation step is to build a term document matrix. In this matrix each word is a row and each column, a tweet:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>tdm <span class="ot">&lt;-</span> <span class="fu">TermDocumentMatrix</span>(myCorpus,<span class="at">control =</span> <span class="fu">list</span>(<span class="at">wordLengths =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="cn">Inf</span>)))</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>tdm</span></code></pre></div>
<pre><code>## &lt;&lt;TermDocumentMatrix (terms: 1602, documents: 583)&gt;&gt;
## Non-/sparse entries: 6005/927961
## Sparsity           : 99%
## Maximal term length: 22
## Weighting          : term frequency (tf)</code></pre>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(tdm) <span class="co"># number of words</span></span></code></pre></div>
<pre><code>## [1] 1602</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ncol</span>(tdm) <span class="co"># number of tweets</span></span></code></pre></div>
<pre><code>## [1] 583</code></pre>
<p>We can inspect the frequent word by specifying a frequency threshold, in this case we will set it to 30.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>freq_thre <span class="ot">=</span> <span class="dv">30</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="co"># First few words:</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>((freq.terms <span class="ot">&lt;-</span> <span class="fu">findFreqTerms</span>(tdm, <span class="at">lowfreq =</span> freq_thre)))</span></code></pre></div>
<pre><code>## [1] &quot;america&quot; &quot;famili&quot;  &quot;will&quot;    &quot;work&quot;    &quot;just&quot;    &quot;must&quot;</code></pre>
<p>Next we want to calculate the word frequency by using the rowSums function, and filter the matrix to only include words that appear more than the specified threshold:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate the word frenquency </span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>term.freq <span class="ot">&lt;-</span> <span class="fu">rowSums</span>(<span class="fu">as.matrix</span>(tdm)) </span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="co"># only keep the frequencies of words(terms) appeared more then freq_thre times</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>term.freq <span class="ot">&lt;-</span> <span class="fu">subset</span>(term.freq, term.freq <span class="sc">&gt;=</span> freq_thre) </span></code></pre></div>
<p>We may wish to plot the word frequencies:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="co"># select the words(terms) appeared more then freq_thre times, according to selected term.freq</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">term =</span> <span class="fu">names</span>(term.freq), <span class="at">freq =</span> term.freq)</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x=</span>term, <span class="at">y=</span>freq)) <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Terms&quot;</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">&quot;Count&quot;</span>) <span class="sc">+</span> <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">7</span>))<span class="sc">+</span><span class="fu">theme_light</span>()</span></code></pre></div>
<div class="figure">
<img src="index_files/figure-html/unnamed-chunk-17-1.png" alt="Frequency of terms" width="768" />
<p class="caption">
Frequency of terms
</p>
</div>
</div>
</div>
<div id="associations" class="section level1">
<h1>Associations</h1>
<p>We may want to consider which words are associated with a specific word, we can do so by specifying our word of interest and the correlation limit, specifying these parameters when calling the findAssocs() function from the tm package:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>word <span class="ot">&lt;-</span> <span class="st">&#39;covid&#39;</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>cor_limit <span class="ot">&lt;-</span> <span class="fl">0.2</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>(<span class="fu">findAssocs</span>(tdm,word,cor_limit))</span></code></pre></div>
<pre><code>## $covid
##          roll         virus          back        unless             u 
##          0.50          0.50          0.37          0.35          0.35 
##        relief        hazard    usprogress         persp     framework 
##          0.34          0.25          0.25          0.25          0.25 
##      dysfunct     oligarchi         woman administratio           cor 
##          0.25          0.25          0.25          0.25          0.25 
##          save 
##          0.21</code></pre>
</div>
<div id="topic-modelling" class="section level1">
<h1>Topic Modelling</h1>
<p>In order to conduct topic modelling, to try to identify themes in the tweets, we will use the topicmodels package. In order to do so we must convert our tdm object into a document term matrix, where wach row is a document (i.e. a tweet) and each column a term. Then we can specify the number of topics and terms that we are interested in:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(topicmodels)</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>dtm <span class="ot">&lt;-</span> <span class="fu">as.DocumentTermMatrix</span>(tdm)</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>topic_num <span class="ot">=</span> <span class="dv">6</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>term_num <span class="ot">=</span> <span class="dv">2</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>rowTotals <span class="ot">&lt;-</span> <span class="fu">apply</span>(dtm , <span class="dv">1</span>, sum) <span class="co">#Find the sum of words in each Document (tweet)</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>dtm  <span class="ot">&lt;-</span> dtm[rowTotals<span class="sc">&gt;</span> <span class="dv">0</span>, ] <span class="co">#remove all docs without words</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>lda <span class="ot">&lt;-</span> <span class="fu">LDA</span>(dtm, <span class="at">k =</span> topic_num) <span class="co"># find k topics</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>term <span class="ot">&lt;-</span> <span class="fu">terms</span>(lda, term_num) <span class="co"># first term_num terms of every topic</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>(term <span class="ot">&lt;-</span> <span class="fu">apply</span>(term, <span class="at">MARGIN =</span> <span class="dv">2</span>, paste, <span class="at">collapse =</span> <span class="st">&quot;, &quot;</span>))</span></code></pre></div>
<pre><code>##            Topic 1            Topic 2            Topic 3            Topic 4 
##      &quot;work, peopl&quot;        &quot;will, now&quot; &quot;work, republican&quot;    &quot;work, countri&quot; 
##            Topic 5            Topic 6 
##     &quot;wage, worker&quot;      &quot;go, countri&quot;</code></pre>
</div>
<div id="sentiment-analysis" class="section level1">
<h1>Sentiment Analysis</h1>
<p>Sentiment analysis can be useful to get an idea of the extent to which the tweets in question can be considered negative, positive, or neutral. To do so we will use the sentiment package. In order to find the sentiment we will use the raw text, which is in our tweets.df object:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sentiment)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="co"># use the raw text for sentiment analysis </span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>sentiments <span class="ot">&lt;-</span> <span class="fu">sentiment</span>(tweets.df<span class="sc">$</span>text)</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(sentiments<span class="sc">$</span>polarity)</span></code></pre></div>
<pre><code>## 
## negative  neutral positive 
##       40      502       41</code></pre>
<p>We may wish to visualise the sentiment, where he negative values are associated with negative sentiment and positive values with positive sentiment, in contrast, neutral is 0:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>sentiments<span class="sc">$</span>score <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>sentiments<span class="sc">$</span>score[sentiments<span class="sc">$</span>polarity <span class="sc">==</span> <span class="st">&quot;positive&quot;</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>sentiments<span class="sc">$</span>score[sentiments<span class="sc">$</span>polarity <span class="sc">==</span> <span class="st">&quot;negative&quot;</span>] <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">1</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>sentiments<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">as.IDate</span>(tweets.df<span class="sc">$</span>created)</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>result <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(score <span class="sc">~</span> date, <span class="at">data =</span> sentiments, sum)</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>)) <span class="co">#set the margins of the plot</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(result, <span class="at">type =</span> <span class="st">&quot;l&quot;</span>)</span></code></pre></div>
<div class="figure">
<img src="index_files/figure-html/unnamed-chunk-21-1.png" alt="Sentiment of tweets, November 2020 to August 2021" width="768" />
<p class="caption">
Sentiment of tweets, November 2020 to August 2021
</p>
</div>
<p>As we can see there seems to be a peak in positive sentiment in Bernie’s tweets between the May and July periods.</p>
<div id="emotion-lexicon" class="section level2">
<h2>Emotion Lexicon</h2>
<p>Alternatively we may use the emotion lexicon,which is a list of words and their respective associations with 8 emotions (anger,fear,anticipation,trust,surprise,sadness,joy and disgust), and two sentiments (negative and positive). FOr this we will use the syuzhet package. It is important that we use the cleaned data as the functions we will use from this package cannot handle non-graphic data:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(syuzhet)</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="co"># use the cleaned text for emotion analysis </span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="co"># since get_nrc_sentiment cannot deal with non-graphic data </span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>tweet_clean <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">text =</span> <span class="fu">sapply</span>(myCorpus, as.character), <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p>In contrast to the previous section, in this case we have a matrix, where each row is a document (i.e. a tweet) and each column an emotion:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># each row: a document (a tweet); each column: an emotion</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>emotion_matrix <span class="ot">&lt;-</span> <span class="fu">get_nrc_sentiment</span>(tweet_clean<span class="sc">$</span>text)</span></code></pre></div>
<p>We need to format the matrix so that instead of each row being a tweet and each column and emotion, each row is an emotion and each column a tweet. To do so we will transpose the matrix.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Matrix Transpose</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>td <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">t</span>(emotion_matrix)) </span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="co">#The function rowSums computes column sums across rows for each level of a grouping variable.</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>td_new <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">rowSums</span>(td))</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>td_new</span></code></pre></div>
<pre><code>##              rowSums.td.
## anger                173
## anticipation         324
## disgust               72
## fear                 145
## joy                  240
## sadness              186
## surprise             144
## trust                361
## negative             360
## positive             525</code></pre>
<p>Finally some transformation and cleaning is necessary, in particular to rename and arrange the columns:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Transformation and cleaning</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(td_new)[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">&quot;count&quot;</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>td_new <span class="ot">&lt;-</span> <span class="fu">cbind</span>(<span class="st">&quot;sentiment&quot;</span> <span class="ot">=</span> <span class="fu">rownames</span>(td_new), td_new)</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(td_new) <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(td_new)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">sentiment</th>
<th align="right">count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">anger</td>
<td align="right">173</td>
</tr>
<tr class="even">
<td align="left">anticipation</td>
<td align="right">324</td>
</tr>
<tr class="odd">
<td align="left">disgust</td>
<td align="right">72</td>
</tr>
<tr class="even">
<td align="left">fear</td>
<td align="right">145</td>
</tr>
<tr class="odd">
<td align="left">joy</td>
<td align="right">240</td>
</tr>
<tr class="even">
<td align="left">sadness</td>
<td align="right">186</td>
</tr>
<tr class="odd">
<td align="left">surprise</td>
<td align="right">144</td>
</tr>
<tr class="even">
<td align="left">trust</td>
<td align="right">361</td>
</tr>
<tr class="odd">
<td align="left">negative</td>
<td align="right">360</td>
</tr>
<tr class="even">
<td align="left">positive</td>
<td align="right">525</td>
</tr>
</tbody>
</table>
<p>Finally we may wish to visualise the sentiment, we add an interactive element here using the plotly package:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>sentiment_plot <span class="ot">&lt;-</span> <span class="fu">qplot</span>(sentiment, <span class="at">data=</span>td_new, <span class="at">weight=</span>count, <span class="at">geom=</span><span class="st">&quot;bar&quot;</span>,<span class="at">fill=</span>sentiment)<span class="sc">+</span><span class="fu">ggtitle</span>(<span class="st">&quot;Tweets emotion and sentiment&quot;</span>)<span class="sc">+</span><span class="fu">theme_minimal</span>()<span class="sc">+</span><span class="fu">theme</span>(<span class="at">axis.text.x=</span><span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">45</span>,<span class="at">vjust=</span><span class="dv">1</span>,<span class="at">hjust=</span><span class="dv">1</span>))</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(sentiment_plot)</span></code></pre></div>
<div class="figure">
<div id="htmlwidget-4eb99f24dc9c8bc70050" style="width:768px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-4eb99f24dc9c8bc70050">{"x":{"data":[{"orientation":"v","width":0.9,"base":0,"x":[1],"y":[173],"text":"count: 173<br />sentiment: anger<br />count: 173<br />sentiment: anger","type":"bar","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"anger","legendgroup":"anger","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[2],"y":[324],"text":"count: 324<br />sentiment: anticipation<br />count: 324<br />sentiment: anticipation","type":"bar","marker":{"autocolorscale":false,"color":"rgba(216,144,0,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"anticipation","legendgroup":"anticipation","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[3],"y":[72],"text":"count:  72<br />sentiment: disgust<br />count:  72<br />sentiment: disgust","type":"bar","marker":{"autocolorscale":false,"color":"rgba(163,165,0,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"disgust","legendgroup":"disgust","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[4],"y":[145],"text":"count: 145<br />sentiment: fear<br />count: 145<br />sentiment: fear","type":"bar","marker":{"autocolorscale":false,"color":"rgba(57,182,0,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"fear","legendgroup":"fear","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[5],"y":[240],"text":"count: 240<br />sentiment: joy<br />count: 240<br />sentiment: joy","type":"bar","marker":{"autocolorscale":false,"color":"rgba(0,191,125,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"joy","legendgroup":"joy","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[6],"y":[360],"text":"count: 360<br />sentiment: negative<br />count: 360<br />sentiment: negative","type":"bar","marker":{"autocolorscale":false,"color":"rgba(0,191,196,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"negative","legendgroup":"negative","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[7],"y":[525],"text":"count: 525<br />sentiment: positive<br />count: 525<br />sentiment: positive","type":"bar","marker":{"autocolorscale":false,"color":"rgba(0,176,246,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"positive","legendgroup":"positive","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.899999999999999,"base":0,"x":[8],"y":[186],"text":"count: 186<br />sentiment: sadness<br />count: 186<br />sentiment: sadness","type":"bar","marker":{"autocolorscale":false,"color":"rgba(149,144,255,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"sadness","legendgroup":"sadness","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.899999999999999,"base":0,"x":[9],"y":[144],"text":"count: 144<br />sentiment: surprise<br />count: 144<br />sentiment: surprise","type":"bar","marker":{"autocolorscale":false,"color":"rgba(231,107,243,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"surprise","legendgroup":"surprise","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.899999999999999,"base":0,"x":[10],"y":[361],"text":"count: 361<br />sentiment: trust<br />count: 361<br />sentiment: trust","type":"bar","marker":{"autocolorscale":false,"color":"rgba(255,98,188,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"trust","legendgroup":"trust","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":45.2237442922374,"r":7.30593607305936,"b":67.3070630566251,"l":28.4931506849315},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"Tweets emotion and sentiment","font":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,10.6],"tickmode":"array","ticktext":["anger","anticipation","disgust","fear","joy","negative","positive","sadness","surprise","trust"],"tickvals":[1,2,3,4,5,6,7,8,9,10],"categoryorder":"array","categoryarray":["anger","anticipation","disgust","fear","joy","negative","positive","sadness","surprise","trust"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-45,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"sentiment","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-26.25,551.25],"tickmode":"array","ticktext":["0","100","200","300","400","500"],"tickvals":[0,100,200,300,400,500],"categoryorder":"array","categoryarray":["0","100","200","300","400","500"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"y":0.913385826771654},"annotations":[{"text":"sentiment","x":1.02,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"left","yanchor":"bottom","legendTitle":true}],"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","showSendToCloud":false},"source":"A","attrs":{"17e3590c89a6":{"x":{},"weight":{},"fill":{},"type":"bar"}},"cur_data":"17e3590c89a6","visdat":{"17e3590c89a6":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p class="caption">
Bernie Sanders tweet emotion and sentiment
</p>
</div>
</div>
</div>
<div id="session-info" class="section level1">
<h1>Session Info</h1>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sessionInfo</span>()</span></code></pre></div>
<pre><code>## R version 4.1.0 (2021-05-18)
## Platform: x86_64-apple-darwin17.0 (64-bit)
## Running under: macOS Big Sur 10.16
## 
## Matrix products: default
## BLAS:   /Library/Frameworks/R.framework/Versions/4.1/Resources/lib/libRblas.dylib
## LAPACK: /Library/Frameworks/R.framework/Versions/4.1/Resources/lib/libRlapack.dylib
## 
## locale:
## [1] en_GB.UTF-8/en_GB.UTF-8/en_GB.UTF-8/C/en_GB.UTF-8/en_GB.UTF-8
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
##  [1] plotly_4.9.4.1     syuzhet_1.0.6      data.table_1.14.0  sentiment_1.0     
##  [5] plyr_1.8.6         rjson_0.2.20       RCurl_1.98-1.3     topicmodels_0.2-12
##  [9] SnowballC_0.7.0    tm_0.7-8           NLP_0.2-1          forcats_0.5.1     
## [13] stringr_1.4.0      dplyr_1.0.7        purrr_0.3.4        readr_2.0.0       
## [17] tidyr_1.1.3        tibble_3.1.3       ggplot2_3.3.5      tidyverse_1.3.1   
## [21] ROAuth_0.9.6       twitteR_1.1.9     
## 
## loaded via a namespace (and not attached):
##  [1] bitops_1.0-7      fs_1.5.0          lubridate_1.7.10  bit64_4.0.5      
##  [5] httr_1.4.2        tools_4.1.0       backports_1.2.1   bslib_0.2.5.1    
##  [9] utf8_1.2.2        R6_2.5.0          DBI_1.1.1         lazyeval_0.2.2   
## [13] colorspace_2.0-2  withr_2.4.2       tidyselect_1.1.1  bit_4.0.4        
## [17] compiler_4.1.0    cli_3.0.1         rvest_1.0.0       pacman_0.5.1     
## [21] xml2_1.3.2        labeling_0.4.2    bookdown_0.22     slam_0.1-48      
## [25] sass_0.4.0        scales_1.1.1      digest_0.6.27     rmarkdown_2.9    
## [29] pkgconfig_2.0.3   htmltools_0.5.1.1 highr_0.9         dbplyr_2.1.1     
## [33] htmlwidgets_1.5.3 rlang_0.4.11      readxl_1.3.1      rstudioapi_0.13  
## [37] farver_2.1.0      jquerylib_0.1.4   generics_0.1.0    jsonlite_1.7.2   
## [41] crosstalk_1.1.1   magrittr_2.0.1    modeltools_0.2-23 Rcpp_1.0.7       
## [45] munsell_0.5.0     fansi_0.5.0       lifecycle_1.0.0   stringi_1.7.3    
## [49] yaml_2.2.1        grid_4.1.0        parallel_4.1.0    crayon_1.4.1     
## [53] haven_2.4.1       hms_1.1.0         knitr_1.33        pillar_1.6.2     
## [57] stats4_4.1.0      reprex_2.0.0      glue_1.4.2        evaluate_0.14    
## [61] modelr_0.1.8      vctrs_0.3.8       rmdformats_1.0.2  tzdb_0.1.2       
## [65] cellranger_1.1.0  gtable_0.3.0      assertthat_0.2.1  xfun_0.24        
## [69] broom_0.7.8       viridisLite_0.4.0 ellipsis_0.3.2</code></pre>
</div>
</div>

   
   
            
      

  <script>
    $(document).ready(function () {

			
 	 	$('#content img').addClass("image-thumb");
		
		$('#content img:not(.no-lightbox)').addClass("image-lb");
	$('#content').magnificPopup({
	    type:'image',
	    closeOnContentClick: false,
	    closeBtnInside: false,
	    delegate: '.image-lb',
	    gallery: {enabled: false },
	    image: {
	        verticalFit: true,
		titleSrc: 'alt'
	    }
 	});
 	    });
  </script>



    <!-- dynamically load mathjax for compatibility with self-contained -->
  <script>
    (function () {
	var script = document.createElement("script");
	script.type = "text/javascript";
	script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
	document.getElementsByTagName("head")[0].appendChild(script);
    })();
  </script>
  
</body>
</html>
